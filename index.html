<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jeromeetienne/ar.js/aframe/build/aframe-ar.js"></script>
    <title>AR Монеты</title>
    <style>
      body { margin: 0; overflow: hidden; }
      #scoreText {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 30px;
        color: white;
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <div id="scoreText">Очки: 0</div>
    <a-scene embedded arjs>
      <!-- Камера для AR -->
      <a-camera position="0 0 3"></a-camera>

      <!-- Монеты -->
      <a-entity id="coin1" geometry="primitive: circle; radius: 0.1;" material="color: red;" position="0 0 -2" class="coin" data-points="-1"></a-entity>
      <a-entity id="coin2" geometry="primitive: circle; radius: 0.1;" material="color: yellow;" position="0.5 0 -2" class="coin" data-points="1"></a-entity>
      <a-entity id="coin3" geometry="primitive: circle; radius: 0.1;" material="color: green;" position="-0.5 0 -2" class="coin" data-points="2"></a-entity>
      <a-entity id="coin4" geometry="primitive: circle; radius: 0.1;" material="color: blue;" position="0 0.5 -2" class="coin" data-points="5"></a-entity>
    </a-scene>

    <script>
      let score = 0;

      // Функция для обновления счета
      function updateScore(points) {
        score += points;
        document.getElementById('scoreText').innerText = `Очки: ${score}`;
      }

      // Добавление обработчика кликов на монеты
      document.querySelectorAll('.coin').forEach(coin => {
        coin.addEventListener('click', function() {
          const points = parseInt(this.getAttribute('data-points'));
          updateScore(points);
        });
      });

      // Функция для создания случайных монет
      function createRandomCoin() {
        const scene = document.querySelector('a-scene');
        const colors = ['red', 'yellow', 'green', 'blue'];
        const points = [-1, 1, 2, 5];

        const randomIndex = Math.floor(Math.random() * 4);
        const color = colors[randomIndex];
        const point = points[randomIndex];

        const newCoin = document.createElement('a-entity');
        newCoin.setAttribute('geometry', 'primitive: circle; radius: 0.1;');
        newCoin.setAttribute('material', `color: ${color};`);
        newCoin.setAttribute('position', `0 ${Math.random() * 2} -2`);
        newCoin.setAttribute('data-points', point);
        newCoin.classList.add('coin');
        scene.appendChild(newCoin);

        newCoin.addEventListener('click', function() {
          updateScore(point);
          scene.removeChild(newCoin); // Удаляем монету после клика
        });
      }

      // Добавление монет через 3 секунды
      setInterval(createRandomCoin, 3000); // Каждые 3 секунды создаются новые монеты
    </script>
  </body>
</html>
